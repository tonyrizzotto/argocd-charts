{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "type": "object",
  "properties": {
    "image": {
      "type": "object",
      "properties": {
        "repository": { "type": "string", "minLength": 1 },
        "tag": {
          "type": "string",
          "pattern": "^[A-Za-z0-9._-]+$",
          "not": { "const": "latest" }
        }
      },
      "required": ["repository", "tag"]
    },

    "resources": {
      "type": "object",
      "properties": {
        "requests": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "minLength": 1 },
            "memory": { "type": "string", "minLength": 1 }
          },
          "required": ["cpu", "memory"]
        },
        "limits": {
          "type": "object",
          "properties": {
            "cpu": { "type": "string", "minLength": 1 },
            "memory": { "type": "string", "minLength": 1 }
          },
          "required": ["cpu", "memory"]
        }
      },
      "required": ["requests", "limits"]
    },

    "livenessProbe": { "type": "object" },
    "readinessProbe": { "type": "object" },
    "hpa": {
      "type": "object",
      "properties": {
        "enabled": { "type": "boolean" },
        "minReplicas": { "type": "integer", "minimum": 1 },
        "maxReplicas": { "type": "integer", "minimum": 1 }
      }
    },
    "podSecurityContext": { "type": "object" },
    "containerSecurityContext": { "type": "object" },
    "env": { "type": "array", "items": { "type": "object" } },
    "envFrom": { "type": "array", "items": { "type": "object" } }},
  "required": ["image", "resources", "livenessProbe", "readinessProbe"]
}
